# nixpacks.toml
nixPkgs = ["python39", "opencv", "mesa", "mesa_glu", "libglvnd", "libglvnd.dev", "libx11", "libxext", "libxrender"]

[phases.build]
cmds = [
  "pip install --no-cache-dir -r requirements.txt",
  "apt-get update && apt-get install ffmpeg libsm6 libxext6 -y"
]

[start]
cmd = "gunicorn api:app --bind 0.0.0.0:$PORT"